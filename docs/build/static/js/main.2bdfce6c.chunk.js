(this["webpackJsonpinfinite-minesweeper"]=this["webpackJsonpinfinite-minesweeper"]||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),r=n(17),o=n.n(r),a=(n(25),n(2)),u=n(5),s=n.n(u),l=n(18),d=n(7),f=n(3),v=n(4),h=function(){function e(t,n){Object(f.a)(this,e),this.x=t,this.y=n}return Object(v.a)(e,[{key:"key",get:function(){return"".concat(this.x,",").concat(this.y)}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}}],[{key:"from",value:function(t){return Object(l.a)(e,Object(d.a)(t.split(",").map(Number)))}}]),e}();h.Zero=new h(0,0);var j="INFINITE MINESWEEPER",b=32;function m(e){return Object(c.useMemo)((function(){return function(e,t,n){for(var c={},i=Math.floor(t/b),r=Math.floor(n/b),o=Math.max.apply(Math,Object(d.a)(e.split("\n").map((function(e){return e.length}))))<i?e.split("\n"):e.split(/[\n ]/),a=Math.floor(r/2)-Math.floor(o.length/2),u=0;u<o.length;u++)for(var s=o[u],l=Math.floor(i/2)-Math.floor(s.length/2),f=0;f<s.length;f++)c[new h(f+l,u+a).key]=s[f];return c}(e,window.innerWidth,window.innerHeight)}),[e])}n(26);var O=n(0);function g(e){var t=e.brand,n=Object(c.useState)(!1),i=Object(a.a)(n,2),r=i[0],o=i[1],u=m(t),l=Object.getOwnPropertyNames(u).map(h.from).map((function(e){var t=e.x,n=e.y,c=e.key;return Object(O.jsx)("div",{className:"opening__square",style:{width:"".concat(b,"px"),height:"".concat(b,"px"),left:"".concat(t*b,"px"),top:"".concat(n*b,"px")},children:u[c]},c)}));return Object(c.useEffect)((function(){var e=setTimeout((function(){o(!0)}),1e3);return function(){clearTimeout(e)}}),[]),Object(O.jsx)("div",{className:s()("opening",r&&"opening--hidden"),children:l})}var x=n(9),p=n(6),w=n(19),k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Object(f.a)(this,e),this.mines=t,this.checked=n,this.flags=c,this.correctFlags=i,this.clicks=r}return Object(v.a)(e,[{key:"set",value:function(t){return Object.assign(new e,this,t)}},{key:"sum",value:function(t,n){return new e(e.count(t.mine,null===n||void 0===n?void 0:n.mine)+this.mines,e.count(t.checked,null===n||void 0===n?void 0:n.checked)+this.checked,e.count(t.flag,null===n||void 0===n?void 0:n.flag)+this.flags,e.count(t.flag&&t.mine,(null===n||void 0===n?void 0:n.flag)&&(null===n||void 0===n?void 0:n.mine))+this.correctFlags,this.clicks)}}],[{key:"count",value:function(e,t){return t&&!e?-1:!t&&e?1:0}}]),e}(),y={mine:function(e,t){return 8!==t&&e<Math.min(.3,.15+Math.log10(t)/100)},itemBox:function(e){return e<.05}},E=function(){function e(t){var n=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(f.a)(this,e),this.randomObject=t,this.seed=c,this.depth=i,this.value=void 0,this.nextSeed=void 0,this.savedNext=void 0;var r={},o=c;Object.getOwnPropertyNames(t).forEach((function(e){var t=e,c=o%1e3/1e3;r[t]=n.randomObject[t](c,i),o=16807*n.seed%2147483647})),this.value=r,this.nextSeed=o}return Object(v.a)(e,[{key:"next",get:function(){if(!this.savedNext){var t=new e(this.randomObject,this.nextSeed,this.depth+1);return this.savedNext=t,t}return this.savedNext}}]),e}(),S=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]].map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1];return new h(n,c)})),M=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new E(y,(new Date).getTime()),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(w.a)(),c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new k;Object(f.a)(this,e),this.random=t,this.field=n,this.stats=c}return Object(v.a)(e,[{key:"checkBlock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getBlock(e);if((null===n||void 0===n?void 0:n.checked)||(null===n||void 0===n?void 0:n.flag))return[this];var c=0===t?this.click():this,i=c.determineAdjacents(e),r=i.tryCountAdjacents(e,(function(e){return null===e||void 0===e?void 0:e.mine})),o=i.setBlock(e,{checked:!0,count:r}),u=Object(a.a)(o,2),s=u[0],l=u[1];if(r>0||(null===l||void 0===l?void 0:l.mine))return[s,l];var f=s.mapAdjacents(e,(function(e,n){return e.checkBlock(n,t+1)})),v=Object(x.a)(f),h=v[0],j=v.slice(1);return[h,l].concat(Object(d.a)(j))}},{key:"getBlock",value:function(e){var t=e.key;return this.field.get(t)}},{key:"blocks",value:function(){return this.field.values()}},{key:"toggleFlag",value:function(e){var t=this.getBlock(e);return(null===t||void 0===t?void 0:t.checked)?[this]:this.click().setBlock(e,{flag:!(null===t||void 0===t?void 0:t.flag)})}},{key:"chordBlock",value:function(e){return this.canChord(e)?this.click().mapAdjacents(e,(function(e,t){return e.checkBlock(t,1)})):[this]}},{key:"canChord",value:function(e){var t=this.getBlock(e);return t&&t.checked&&!t.mine&&t.count===this.tryCountAdjacents(e,(function(e){return e&&(e.flag||e.checked&&e.mine)}))}},{key:"click",value:function(){return new e(this.random,this.field,this.stats.set({clicks:this.stats.clicks+1}))}},{key:"setBlock",value:function(t,n){var c=this.getBlock(t),i=Object(p.a)(Object(p.a)(Object(p.a)({position:t,count:0,checked:!1,flag:!1},this.random.value),c),n),r=this.stats.sum(i,c),o=this.field.set(t.key,i);return[new e(this.random.next,o,r),i]}},{key:"determineAdjacents",value:function(e){return this.mapAdjacents(e,(function(e,t){return e.setBlock(t)}))[0]}},{key:"mapAdjacents",value:function(t,n){return e.getAdjacentPositions(t).reduce((function(e,t){var c=Object(x.a)(e),i=c[0],r=c.slice(1),o=n(i,t),a=Object(x.a)(o),u=a[0],s=a.slice(1);return[u].concat(Object(d.a)(r),Object(d.a)(s))}),[this])}},{key:"tryCountAdjacents",value:function(t,n){var c=this;return e.getAdjacentPositions(t).map((function(e){return c.getBlock(e)})).filter(n).length}}],[{key:"getAdjacentPositions",value:function(e){return S.map((function(t){return e.add(t)}))}}]),e}(),N=n(20);n(29);function C(e){var t=e.value,n=void 0===t?0:t,i=e.position,r=void 0===i?0:i,o=e.startValue,a=Math.abs(n)%10,u=Object(c.useRef)(null!==o&&void 0!==o?o:a),s=u.current,l={animationDelay:"".concat(100*r,"ms")};return Object(c.useEffect)((function(){u.current=a}),[a]),Object(O.jsxs)("span",{className:"sliding-digit",children:[a===s&&Object(O.jsx)("span",{children:a},a),a!==s&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{style:l,className:"sliding-digit__current",children:a},a),Object(O.jsx)("span",{style:l,className:"sliding-digit__prev",children:s},s)]})]})}function T(e){var t=e.value,n=e.startFromZero,c=void 0!==n&&n,i=Array.from(String(t)).map(Number);return Object(O.jsx)("span",{children:i.map((function(e,t){return Object(O.jsx)(C,{value:e,position:i.length-t-1,startValue:c?0:void 0},"digit-".concat(i.length-t-1))}))})}var B=i.a.memo(T);n(30);function R(e){var t=e.stats,n=e.onRetry,i=Object(c.useState)(0),r=Object(a.a)(i,2),o=r[0],u=r[1],s=Object(c.useState)(0),l=Object(a.a)(s,2),d=l[0],f=l[1],v=Object(c.useState)(0),h=Object(a.a)(v,2),j=h[0],b=h[1];return Object(c.useEffect)((function(){var e=setTimeout((function(){f(Math.max(Math.floor(t.checked/t.clicks),0)),u(t.clicks),b(t.correctFlags)}),500);return function(){clearTimeout(e)}}),[t]),Object(O.jsx)("div",{className:"game-result",children:Object(O.jsxs)("div",{className:"game-result__panel",children:[Object(O.jsx)("h1",{children:"GAME OVER"}),Object(O.jsx)("table",{children:Object(O.jsxs)("tbody",{children:[Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"CLICKS"}),Object(O.jsx)("td",{children:Object(O.jsx)(B,{value:o,startFromZero:!0})})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"EFFICIENCY"}),Object(O.jsx)("td",{children:Object(O.jsx)(B,{value:d,startFromZero:!0})})]}),Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{children:"WINS"}),Object(O.jsx)("td",{children:Object(O.jsx)(B,{value:j,startFromZero:!0})})]})]})}),n&&Object(O.jsx)("button",{type:"button",className:"game-result__retry",onClick:n,children:"RETRY"}),Object(O.jsx)("div",{children:Object(O.jsx)(N.a,{href:"https://github.com/elfrog/infinite-minesweeper","aria-label":"Star elfrog/infinite-minesweeper on GitHub",children:"Star"})})]})})}n(31);function L(e){var t=e.isPaused,n=e.panel,c=e.children;return Object(O.jsxs)("div",{className:s()("game-container",t&&"game-container--paused"),children:[Object(O.jsx)("div",{className:"game-container__field",children:c}),Object(O.jsx)("div",{className:"game-container__panel",children:n})]})}n(32);function _(e){var t=e.value,n=e.max,c=Math.min(100,t/n*100),i={width:"".concat(c,"%")};return Object(O.jsx)("div",{className:s()("time-progress",c<20&&"time-progress--hurry",c>=20&&c<50&&"time-progress--warning"),children:Object(O.jsx)("div",{className:"time-progress__bar",style:i})})}n(33);function F(e){var t=e.time,n=e.checked,c=e.flags;return Object(O.jsx)("div",{className:"scoreboard",children:Object(O.jsxs)("div",{className:"scoreboard__panel",children:[Object(O.jsx)("div",{children:Object(O.jsx)("div",{className:"scoreboard__time",children:Object(O.jsx)(_,{value:t,max:1})})}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("div",{className:"scoreboard__score",children:[Object(O.jsx)("span",{children:"\u2611\ufe0f"}),Object(O.jsx)(T,{value:n})]}),Object(O.jsxs)("div",{className:"scoreboard__score",children:[Object(O.jsx)("span",{children:"\ud83d\udea9"}),Object(O.jsx)(T,{value:c})]})]})]})})}n(34);function I(){return Object(O.jsx)("div",{className:"start-banner",children:Object(O.jsx)("span",{children:"START!"})})}function P(e){var t=e.maxSeconds,n=e.fieldState,i=e.timeChanges,r=e.onTimeOver,o=function(e){var t=Object(c.useState)(e),n=Object(a.a)(t,2),i=n[0],r=n[1],o=Object(c.useRef)(0),u=Object(c.useMemo)((function(){return{increase:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;o.current&&r((function(n){return Math.max(Math.min(n+t+1,e),0)}))},start:function(){o.current||(o.current=window.setInterval((function(){r((function(e){return 0===e?(window.clearInterval(o.current),o.current=0,0):Math.max(e-1,0)}))}),1e3))},stop:function(){o.current&&(window.clearInterval(o.current),o.current=0)},reset:function(){r(e),o.current&&(window.clearInterval(o.current),o.current=0)}}}),[e]);return Object(c.useEffect)((function(){return function(){o.current&&window.clearInterval(o.current)}}),[]),[i,u]}(t),u=Object(a.a)(o,2),s=u[0],l=u[1];return Object(c.useEffect)((function(){l.start()}),[l]),Object(c.useEffect)((function(){0===s&&(null===r||void 0===r||r())}),[s,r]),Object(c.useEffect)((function(){i.forEach((function(e){e&&l.increase(e)}))}),[i,l]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(F,{time:s/t,checked:n.stats.checked,flags:n.stats.flags}),Object(O.jsx)(I,{})]})}var A=function(){function e(t,n,c,i){Object(f.a)(this,e),this.xStart=t,this.yStart=n,this.xEnd=c,this.yEnd=i}return Object(v.a)(e,[{key:"equals",value:function(e){return e.xStart===this.xStart&&e.yStart===this.yStart&&e.xEnd===this.xEnd&&e.yEnd===this.yEnd}},{key:"map",value:function(e){for(var t=[],n=0,c=this.yStart;c<=this.yEnd;c++)for(var i=this.xStart;i<=this.xEnd;i++)t.push(e(new h(i,c),n)),n++;return t}},{key:"forEach",value:function(e){for(var t=0,n=this.yStart;n<=this.yEnd;n++)for(var c=this.xStart;c<=this.xEnd;c++)e(new h(c,n),t),t++}}],[{key:"fromRect",value:function(t,n,c,i,r){var o=Math.floor(t/r),a=o+Math.ceil(c/r),u=Math.floor(n/r);return new e(o,u,a,u+Math.ceil(i/r))}}]),e}();function D(e,t){var n=Object(c.useRef)(A.Zero),i=Object(c.useState)(A.Zero),r=Object(a.a)(i,2),o=r[0],u=r[1];return Object(c.useEffect)((function(){function c(){var c=e.current;if(c){var i=c.getBoundingClientRect(),r=A.fromRect(t.x,t.y,i.width,i.height,b);r.equals(n.current)||(n.current=r,u(r))}}return c(),window.addEventListener("resize",c,!1),function(){window.removeEventListener("resize",c,!1)}}),[e,t]),o}A.Zero=new A(0,0,0,0);n(35);function q(e){var t=e.offset,n=e.children,i=Object(c.useRef)(null),r=D(i,t);return Object(O.jsx)("div",{ref:i,className:"field",children:Object(O.jsx)("div",{className:"field__content",style:{left:"".concat(r.xStart*b-t.x,"px"),top:"".concat(r.yStart*b-t.y,"px"),width:"".concat((r.xEnd-r.xStart+1)*b,"px"),height:"".concat((r.yEnd-r.yStart+1)*b,"px")},children:null===n||void 0===n?void 0:n(r)})})}n(36);function Z(e){var t=e.x,n=e.y;return new h(Math.floor(t/b),Math.floor(n/b))}function Y(e){var t=e.checked,n=e.flag,c=e.itemBox,i=e.pushed,r=e.count,o=void 0===r?0:r,a=e.mine,u=e.text,l="";return t?l=a?"\ud83d\udca3":"".concat(o||""):n?l="\ud83d\udea9":c?l="\u23f0":u&&(l=u),Object(O.jsx)("div",{className:s()("square","square--count-".concat(o),t&&"square--checked",!t&&i&&"square--pushed",!t&&u&&"square--text"),style:{width:"".concat(b,"px"),height:"".concat(b,"px")},children:l})}n(37);function X(e){var t=e.onMouseDown,n=e.onMouseUp,i=e.onLongMouseDown,r=e.onClick,o=e.onLongClick,u=e.onRightClick,l=e.onDualClick,d=e.onPan,f=e.onPanEnd,v=e.children,j=Object(c.useRef)(null),b=Object(c.useRef)(!1),m=Object(c.useRef)(!1),g=Object(c.useRef)(0),x=Object(c.useRef)(h.Zero);function p(){g.current&&(clearTimeout(g.current),g.current=0)}var w=Object(c.useCallback)((function(e,t){var n=new h(x.current.x+e,x.current.y+t);x.current=n,p(),null===d||void 0===d||d(n)}),[d]),k=function(e,t){var n=Object(c.useState)(!1),i=Object(a.a)(n,2),r=i[0],o=i[1];return Object(c.useEffect)((function(){if(!e.current)return function(){};var n=e.current,c=!1,i=0,r=0;function a(e,n){var a=i-e,u=r-n;c||Math.abs(a)+Math.abs(u)>1&&(o(!0),c=!0),c&&t(a,u),i=e,r=n}function u(e,t){i=e,r=t}function s(e){e.stopPropagation(),e.preventDefault(),o(!1),c=!1}function l(e){a(e.clientX,e.clientY)}function d(e){s(e),window.removeEventListener("mouseup",d,!1),window.removeEventListener("mousemove",l,!1)}function f(e){u(e.clientX,e.clientY),window.addEventListener("mouseup",d,!1),window.addEventListener("mousemove",l,!1)}function v(e){a(e.touches[0].clientX||0,e.touches[0].clientY||0)}function h(e){s(e),window.removeEventListener("touchmove",v,!1),window.removeEventListener("touchend",h,!1)}function j(e){u(e.touches[0].clientX||0,e.touches[0].clientY||0),window.addEventListener("touchmove",v,!1),window.addEventListener("touchend",h,!1)}return n.addEventListener("mousedown",f,!1),n.addEventListener("touchstart",j,!1),function(){n.removeEventListener("mousedown",f,!1),window.removeEventListener("mousemove",l,!1),window.removeEventListener("mouseup",d,!1),n.removeEventListener("touchstart",j,!1),window.removeEventListener("touchmove",v,!1),window.removeEventListener("touchend",h,!1)}}),[e,t]),r}(j,w);function y(e){var t,n,c=e.clientX-((null===(t=j.current)||void 0===t?void 0:t.clientLeft)||0),i=e.clientY-((null===(n=j.current)||void 0===n?void 0:n.clientTop)||0);return new h(c+x.current.x,i+x.current.y)}function E(e){var t,n,c,i,r=(null===(t=e.touches[0])||void 0===t?void 0:t.clientX)||e.changedTouches[0].clientX,o=(null===(n=e.touches[0])||void 0===n?void 0:n.clientY)||e.changedTouches[0].clientY,a=r-((null===(c=j.current)||void 0===c?void 0:c.clientLeft)||0),u=o-((null===(i=j.current)||void 0===i?void 0:i.clientTop)||0);return new h(a+x.current.x,u+x.current.y)}return Object(O.jsx)("div",{ref:j,role:"button",tabIndex:-1,className:s()("mouse-control",k&&"mouse-control--panning"),onMouseDown:function(e){e.preventDefault(),e.stopPropagation();var n=y(e);p(),0===e.button?b.current=!0:2===e.button&&(m.current=!0),b.current&&m.current?null===l||void 0===l||l(n):(b.current&&(null===t||void 0===t||t(n)),g.current=window.setTimeout((function(){g.current=0,b.current=!1,m.current=!1,null===i||void 0===i||i(n)}),250))},onMouseUp:function(e){var t=y(e);k?null===f||void 0===f||f(x.current):(g.current||null===o||void 0===o||o(t),b.current?null===r||void 0===r||r(t):m.current&&(null===u||void 0===u||u(t))),b.current=!1,m.current=!1,null===n||void 0===n||n(t),p()},onTouchStart:function(e){var n=E(e);p(),null===t||void 0===t||t(n),g.current=window.setTimeout((function(){g.current=0,null===i||void 0===i||i(n)}),250)},onTouchEnd:function(e){var t=E(e);k?null===f||void 0===f||f(x.current):g.current?null===r||void 0===r||r(t):null===o||void 0===o||o(t),null===n||void 0===n||n(t),p()},onContextMenu:function(e){e.preventDefault()},children:v})}function W(e,t,n){var i=Object(c.useState)(void 0),r=Object(a.a)(i,2),o=r[0],u=r[1];return Object(c.useEffect)((function(){if(e.current&&t&&n){var c=e.current,i=c.getContext("2d",{alpha:!1});if(i){var r=window.devicePixelRatio;c.width=t*r,c.height=n*r,c.style.width="".concat(t,"px"),c.style.height="".concat(n,"px"),i.scale(r,r),u(i)}}}),[e,t,n]),o}n(38);function U(e){var t,n,i=e.offset,r=e.children,o=Object(c.useRef)(null),a=Object(c.useRef)(null),u=W(a,(null===(t=o.current)||void 0===t?void 0:t.clientWidth)||0,(null===(n=o.current)||void 0===n?void 0:n.clientHeight)||0),s=D(o,i);return Object(c.useEffect)((function(){if(!u)return function(){};var e=window.requestAnimationFrame((function(){var e=(null===r||void 0===r?void 0:r(s))||[];s.forEach((function(t,n){var c=e[n];c&&u.drawImage(c,t.x*b-i.x,t.y*b-i.y,b,b)}))}));return function(){window.cancelAnimationFrame(e)}}),[i,s,r,u]),Object(O.jsx)("div",{ref:o,className:"canvas-field",children:Object(O.jsx)("canvas",{ref:a})})}var H=n.p+"static/media/bomb.a3efd994.svg",J=n.p+"static/media/flag.a9212e68.svg",V=n.p+"static/media/clock.8231cb11.svg",z=16,G=["white","#0000ff","#008000","#ff0000","#800080","#800000","#40e0d0","#000000","#808080"];function K(e){var t=new Image;return t.src=e,t}var Q=K(H),$=K(J),ee=K(V),te=new Map;function ne(e){var t=JSON.stringify(e),n=te.get(t);if(n)return n;var c=window.devicePixelRatio,i=document.createElement("canvas"),r=i.getContext("2d",{alpha:!1});return i.width=b*c,i.height=b*c,r&&(r.scale(c,c),function(e,t){var n=t.checked,c=t.flag,i=t.itemBox,r=t.count,o=void 0===r?0:r,a=t.mine,u=t.pushed,s=t.text;e.font="16px monospace",e.textAlign="center",e.textBaseline="middle",n?(e.fillStyle="#d3d3d3",e.fillRect(0,0,b,b),e.fillStyle=n?"#eee":"#aaa",e.fillRect(1.5,1.5,29,29),a?e.drawImage(Q,8,8,z,z):o>0&&(e.fillStyle=G[o]||"white",e.fillText(String(o),16,16))):(e.beginPath(),e.lineWidth=3,e.fillStyle=u?"#808080":"#d3d3d3",e.moveTo(0,b),e.lineTo(0,0),e.lineTo(b,0),e.fill(),e.beginPath(),e.fillStyle=u?"#d3d3d3":"#808080",e.moveTo(b,0),e.lineTo(b,b),e.lineTo(0,b),e.fill(),e.fillStyle=n?"#eee":"#aaa",e.fillRect(3,3,26,26),c?e.drawImage($,8,8,z,z):i?e.drawImage(ee,8,8,z,z):s&&(e.fillStyle="#2f4f4f",e.fillText(s,16,16)))}(r,e)),te.set(t,i),i}function ce(e){var t=e.fieldState,n=e.useCanvas,i=void 0===n||n,r=e.squareText,o=e.onCheck,u=e.onChord,s=e.onFlag,l=m(r),d=Object(c.useState)(h.Zero),f=Object(a.a)(d,2),v=f[0],j=f[1],b=Object(c.useState)([]),g=Object(a.a)(b,2),x=g[0],w=g[1],k=Object(c.useCallback)((function(e){j(e)}),[]);function y(e){var t=Z(e);s(t)}return Object(O.jsxs)(X,{onPan:k,onMouseDown:function(e){var n=Z(e);t.canChord(n)?w(M.getAdjacentPositions(n).filter((function(e){var n;return!(null===(n=t.getBlock(e))||void 0===n?void 0:n.flag)})).map((function(e){return e.key}))):w([n.key])},onMouseUp:function(){w([])},onLongMouseDown:y,onClick:function(e){var n=Z(e),c=t.getBlock(n);(null===c||void 0===c?void 0:c.checked)?u(n):o(n)},onRightClick:y,onLongClick:function(e){var n=Z(e),c=t.getBlock(n);(null===c||void 0===c?void 0:c.checked)&&u(n)},onDualClick:function(e){var t=Z(e);u(t)},children:[!i&&Object(O.jsx)(q,{offset:v,children:function(e){return e.map((function(e){return Object(O.jsx)(Y,Object(p.a)({pushed:x.includes(e.key),text:l[e.key]},t.getBlock(e)),e.key)}))}}),i&&Object(O.jsx)(U,{offset:v,children:function(e){return e.map((function(e){return ne(Object(p.a)({pushed:x.includes(e.key),text:l[e.key]},t.getBlock(e)))}))}})]})}var ie="false"!==new URL(window.location.href).searchParams.get("canvas");var re=function(){var e=Object(c.useState)((function(){return new M})),t=Object(a.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)("ready"),o=Object(a.a)(r,2),u=o[0],s=o[1],l=Object(c.useState)([]),d=Object(a.a)(l,2),f=d[0],v=d[1],h=Object(c.useCallback)((function(){s("gameover")}),[]);function b(){switch(u){case"ready":return s("playing"),!0;case"playing":return!0;default:return!1}}function m(e){var t=Object(x.a)(e),c=t[0],r=t.slice(1);b()&&(v(r.map((function(e){var t,c=e.mine,i=e.position;return c?-5:(null===(t=n.getBlock(i))||void 0===t?void 0:t.itemBox)?5:0}))),i(c))}return Object(O.jsx)(L,{isPaused:"gameover"===u,panel:Object(O.jsxs)(O.Fragment,{children:["playing"===u&&Object(O.jsx)(P,{maxSeconds:60,fieldState:n,timeChanges:f,onTimeOver:h}),"gameover"===u&&Object(O.jsx)(R,{stats:n.stats,onRetry:function(){s("ready"),i(new M)}})]}),children:Object(O.jsx)(ce,{fieldState:n,squareText:j,useCanvas:ie,onCheck:function(e){m(n.checkBlock(e))},onChord:function(e){m(n.chordBlock(e))},onFlag:function(e){var t=n.getBlock(e);b(),(null===t||void 0===t?void 0:t.checked)||i(n.toggleFlag(e)[0])}})})};var oe=function(){return Object(O.jsxs)("div",{className:"app",children:[Object(O.jsx)(re,{}),Object(O.jsx)(g,{brand:j})]})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),i(e),r(e),o(e)}))};o.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(oe,{})}),document.getElementById("root")),ae()}},[[39,1,2]]]);
//# sourceMappingURL=main.2bdfce6c.chunk.js.map